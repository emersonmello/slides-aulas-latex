% 2018 Emerson Ribeiro de Mello
% This theme is based on BeamerThemeFocus - https://github.com/elauksap/focus-beamertheme

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerthemeifscyan}[2018/07/04 - IFSCyan Beamer theme]

\mode<presentation>
% ----------------------------------------------------------------------------%
%                          Pacotes
% ----------------------------------------------------------------------------%
\RequirePackage{pgf}
\RequirePackage{graphicx}
\RequirePackage{listings,color,upquote}
\RequirePackage{array}
\RequirePackage{multirow}
\RequirePackage{url,color,ae}
\RequirePackage{soul}
\urlstyle{sf}

\RequirePackage{tikz}
\RequirePackage{etoolbox} % \BeforeBeginEnvironment
\RequirePackage{appendixnumberbeamer} % Don't number appendix frames.

% -------------------------------------------------%
% Configurações para o PDF que será gerado
% -------------------------------------------------%
\hypersetup{
    colorlinks,
    pdffitwindow=false,  % window fit to page when opened
    pdfstartview={FitH}, % fits the width of the page to the window
    linkcolor=black,  %%% cor do tableofcontents, \ref, \footnote, etc
	citecolor=black,  %%% cor do \cite
	urlcolor=black   %%% cor do \url e \href
}
% Use esse comando para fazer links para sites.
% Os links ficarão em azual e dentro dos símbolos < e > 
\newcommand{\MYhref}[3][blue]{\href{#2}{\color{#1}{<#3>}}}%
% -------------------------------------------------%

% ----------------------------------------------------------------------------%
%                           CORES
% ----------------------------------------------------------------------------%
\definecolor{main}{RGB}{13,79,77}
\definecolor{background}{RGB}{238,241,236}

\usecolortheme[named=main]{structure}

\definecolor{alert}{RGB}{180, 0, 0}
\definecolor{example}{RGB}{0, 110, 0}


\setbeamercolor{frametitle}{fg=background, bg=main}
\setbeamercolor{framenumber}{fg=background, bg=main}

\setbeamercolor{normal text}{fg=black, bg=background}
\setbeamercolor{alerted text}{fg=alert}
\setbeamercolor{example text}{fg=example}

\setbeamercolor{block title}{bg=main!80!background, fg=background}
\setbeamercolor{block body}{bg=main!10!background, fg=main}

\setbeamercolor{block title alerted}{bg=alert, fg=background}
\setbeamercolor{block body alerted}{bg=alert!10!background, fg=black}

\setbeamercolor{block title example}{bg=example, fg=background}
\setbeamercolor{block body example}{bg=example!10!background, fg=main}

\setbeamercolor{itemize item}{fg=main}
\setbeamercolor{itemize subitem}{fg=main}

\setbeamercolor{enumerate item}{fg=main!70!black}
\setbeamercolor{enumerate subitem}{fg=main!70!black}

\setbeamercolor{description item}{fg=main!70!black}
\setbeamercolor{description subitem}{fg=main!70!black}

\setbeamercolor{section in toc}{fg=main}
\setbeamercolor{subsection in toc}{fg=main}
\setbeamercolor{section number projected}{bg=main}
\setbeamercolor{subsection number projected}{bg=main}

\setbeamercolor{bibliography item}{fg=main}
\setbeamercolor{bibliography entry author}{fg=main!70!black}
\setbeamercolor{bibliography entry title}{fg=main}
\setbeamercolor{bibliography entry location}{fg=main}
\setbeamercolor{bibliography entry note}{fg=main}

% ----------------------------------------------------------------------------%


\setbeamerfont{title}{size=\huge, series=\bfseries}
\setbeamerfont{subtitle}{size=\Large, parent=structure}
\setbeamerfont{author}{size=\Large}

\setbeamerfont{institute}{size=\large}
\setbeamerfont{date}{size=\large, shape=\scshape}

\setbeamerfont{sectiontitle}{size=\huge, series=\bfseries}
\setbeamerfont{frametitle}{size=\large}

\setbeamerfont{footer}{size=\normalsize}

\setbeamerfont{focusframe}{size=\huge, shape=\scshape}

\setbeamerfont{bibliography item}{size=\small, shape=\scshape}
\setbeamerfont{bibliography entry author}{size=\small, shape=\scshape}
\setbeamerfont{bibliography entry title}{size=\small, series=\bfseries}
\setbeamerfont{bibliography entry location}{size=\small, shape=\normalfont}
\setbeamerfont{bibliography entry note}{size=\small, shape=\normalfont}

% ----------------------------------------------------------------------------%

% ----------------------------------------------------------------------------%
%                          Configurações do tema
% ----------------------------------------------------------------------------%
\setbeamersize{text margin left=5pt,text margin right=5pt}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{headline}[text line]{}

\useinnertheme{rectangles}


\pgfdeclareimage[width=.25\paperwidth]{ifsclogo}{figs/ifsclogo}

% footer
\pgfdeclareimage[width=\paperwidth]{footer}{figs/rodape-2018}

\setbeamertemplate{footline}{
	\pgfuseimage{footer}%
  \usebeamercolor[fg]{framenumber}
  \pgftext[at=\pgfpoint{-35pt}{5pt},center,bottom]{\insertframenumber/\inserttotalframenumber}
}

% Title page.
\defbeamertemplate*{title page}{focus}[1][]
{
    \begin{tikzpicture}[overlay, remember picture]
        \fill[color=main] (current page.north west) rectangle ([shift = {(0, -0.45\paperheight)}] current page.north east);
    \end{tikzpicture}
    
    \vspace{-1.65\baselineskip}
    \begin{minipage}[b][0.35\paperheight]{\textwidth}
        \vspace{\baselineskip}
        \usebeamerfont{title}
        \usebeamercolor[fg]{frametitle}
        \inserttitle
    \end{minipage}
    
    \begin{minipage}[t][0.1\paperheight]{\textwidth}
        \usebeamerfont{subtitle}
        \usebeamercolor[fg]{frametitle}
        \insertsubtitle
    \end{minipage}
    
    % Set the title graphic in a zero-height box, so that
    % the position of other elements is not affected.
    \vbox to 0pt {
        \raggedleft
        \inserttitlegraphic
    }
    
    \begin{minipage}[t]{\textwidth}
        \usebeamerfont{author}
        \insertauthor
    \end{minipage}
    
    \vspace*{\baselineskip}
    \begin{minipage}[t]{\textwidth}
        \usebeamerfont{institute}
        \insertinstitute
    \end{minipage}
    
    \vspace*{\baselineskip}
    \begin{minipage}[t]{\textwidth}
        \usebeamerfont{date}{\insertdate}
    \end{minipage}
    
    \vspace*{5\baselineskip}
    
    \addtocounter{framenumber}{-1}
}



% Section page.
\defbeamertemplate*{section page}{focus}{
    \begin{tikzpicture}[overlay, remember picture]
        \fill[color=main] (current page.north west) rectangle ([shift = {(0, -0.45\paperheight)}] current page.north east);
    \end{tikzpicture}
    
    \vspace{-2\baselineskip}
    \begin{minipage}[b][0.45\paperheight]{\textwidth}
        \usebeamerfont{sectiontitle}
        \usebeamercolor[fg]{frametitle}
        \let\hyperlink\@secondoftwo\insertsection
    \end{minipage}
    
    \begin{minipage}[t][0.55\paperheight]{\textwidth}
    \end{minipage}
}
\setbeamertemplate{section page}[focus]

\AtBeginSection{
    \begin{frame}[plain, noframenumbering]{}
        \sectionpage
    \end{frame}
}


% ------------------------------------------------------------------------------------%



% ------------------------------------------------------------------------------------%%                          Comandos pessoais
% ------------------------------------------------------------------------------------%
% Esse comando deve ser usado dentro do ambiente itemize para aumentar o espaço entre os items
\newcommand{\espaco}[1]{
 \setlength\itemsep{#1}
} % ex: \espaco{1.5em}

% Criando um slide com um espaçamento maior entre os items de todas as listas de itens:
% https://tex.stackexchange.com/questions/16793/global-setting-of-spacing-between-items-in-itemize-environment-for-beamer
\makeatletter
\define@key{beamerframe}{wide}[10pt]{%
  \def\beamer@cramped{\itemsep #1\topsep0.5pt\relax}}  
\makeatother


%-----------------------------------------------------------------------------------%

%-----------------------------------------------------------------------------------%
%                          Opções para o pacote listings 
%-----------------------------------------------------------------------------------%
% Altera o nome padrão do rótulo usado no comando \autoref{}
\renewcommand{\lstlistingname}{Código}

% Altera o rótulo a ser usando no elemento pré-textual "Lista de código"
\renewcommand{\lstlistlistingname}{Lista de códigos}


\definecolor{hellgelb}{rgb}{1,1,0.9}
\definecolor{colKeys}{rgb}{0,0,0}
\definecolor{colIdentifier}{rgb}{0,0,0.9}
\definecolor{colComments}{rgb}{.4,.4,.4}
\definecolor{colString}{rgb}{0,0,0.6}


\definecolor{deepblue}{rgb}{0,0,0.8}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\definecolor{colBack}{rgb}{1,1,0.9}
\definecolor{colKeys}{rgb}{108,48,130}%{0,0,0}
\definecolor{colIdentifier}{rgb}{0,0,0.9}
\definecolor{colComments}{rgb}{0,0.6,0}%{.4,.4,.4}
\definecolor{colString}{rgb}{0.6,0,0}


\definecolor{javared}{rgb}{0.6,0,0} % for strings
\definecolor{javagreen}{rgb}{0.25,0.5,0.35} % comments
\definecolor{javapurple}{rgb}{0.5,0,0.35} % keywords
\definecolor{javadocblue}{rgb}{0.25,0.35,0.75} % javadoc



\lstset{ %
  aboveskip=\bigskipamount,
  backgroundcolor=\color{colBack},   % choose the background color; you must add \usepackage{color} or 
  basicstyle=\ttfamily\footnotesize,       % the size of the fonts that are used for the code
  keywordstyle=\color{deepblue},
  stringstyle=\color{javared},
  commentstyle=\color{javagreen},
  morecomment=[s][\color{javadocblue}]{/**}{*/},
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=n,                    % sets the caption-position to none
  columns=flexible,
%  commentstyle=\color{colComments},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapechar={@*},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  linewidth=0.98\linewidth,
  tab=$\to$,
  float=tbph,
  xleftmargin=10pt,
  frame=single,	                   % adds a frame around the code
  keepspaces=true,                % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
%identifierstyle=\color{colIdentifier},
%  keywordstyle=\color{deepblue},       % keyword style
%  otherkeywords={*,...},            % if you want to add more keywords to the set
  firstnumber=last,
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny,
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
%   stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
%  stringstyle=\color{colString},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}

% Criando definição para linguagem Groovy
\definecolor{groovyblue}{HTML}{0000A0}
\definecolor{groovygreen}{HTML}{008000}
\definecolor{darkgray}{rgb}{.4,.4,.4}
 
\lstdefinelanguage{Groovy}[]{Java}{
  keywordstyle=\color{groovyblue}\bfseries,
  stringstyle=\color{groovygreen}\ttfamily,
  keywords=[3]{each, findAll, groupBy, collect, inject, eachWithIndex},
  morekeywords={def, as, in, use},
  moredelim=[is][\textcolor{darkgray}]{\%\%}{\%\%},
  moredelim=[il][\textcolor{darkgray}]{§§}
}

\definecolor{eclipseStrings}{RGB}{42,0.0,255}
\definecolor{eclipseKeywords}{RGB}{127,0,85}
\colorlet{numb}{magenta!60!black}

\lstdefinelanguage{json}{
    commentstyle=\color{eclipseStrings}, % style of comment
    stringstyle=\color{eclipseKeywords}, % style of strings
    string=[s]{"}{"},
    comment=[l]{:\ "},
    morecomment=[l]{:"},
    literate=
        *{0}{{{\color{numb}0}}}{1}
         {1}{{{\color{numb}1}}}{1}
         {2}{{{\color{numb}2}}}{1}
         {3}{{{\color{numb}3}}}{1}
         {4}{{{\color{numb}4}}}{1}
         {5}{{{\color{numb}5}}}{1}
         {6}{{{\color{numb}6}}}{1}
         {7}{{{\color{numb}7}}}{1}
         {8}{{{\color{numb}8}}}{1}
         {9}{{{\color{numb}9}}}{1}
}

% Permitindo caracteres acentuados dentro do ambiente lstlisting
\lstset{%
        inputencoding=utf8,
        extendedchars=true,
        literate=%
        {é}{{\'{e}}}1
        {è}{{\`{e}}}1
        {ê}{{\^{e}}}1
        {ë}{{\¨{e}}}1
        {É}{{\'{E}}}1
        {Ê}{{\^{E}}}1
        {û}{{\^{u}}}1
        {ù}{{\`{u}}}1
        {â}{{\^{a}}}1
        {à}{{\`{a}}}1
        {á}{{\'{a}}}1
        {ã}{{\~{a}}}1
        {Á}{{\'{A}}}1
        {Â}{{\^{A}}}1
        {Ã}{{\~{A}}}1
        {ç}{{\c{c}}}1
        {Ç}{{\c{C}}}1
        {õ}{{\~{o}}}1
        {ó}{{\'{o}}}1
        {ú}{{\'{u}}}1
        {Ú}{{\'{U}}}1
        {ô}{{\^{o}}}1
        {Õ}{{\~{O}}}1
        {Ó}{{\'{O}}}1
        {Ô}{{\^{O}}}1
        {î}{{\^{i}}}1
        {Î}{{\^{I}}}1
        {í}{{\'{i}}}1
        {Í}{{\~{Í}}}1
}

\lstdefinestyle{shell}{language=csh,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{shellp}{language=csh,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{php}{language=php,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{phpp}{language=php,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{ansic}{language=c,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{ansicp}{language=c,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{cpp}{language=C++,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{cppp}{language=C++,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{java}{language=java,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{javap}{language=java,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{json}{language=json,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{jsonp}{language=json,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{matlab}{language=matlab,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{matlabp}{language=matlab,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{python}{language=python,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{pythonp}{language=python,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{xml}{language=xml,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{xmlp}{language=xml,basicstyle=\ttfamily\scriptsize}
\lstdefinestyle{sql}{language=sql,basicstyle=\ttfamily\footnotesize}
\lstdefinestyle{sqlp}{language=sql,basicstyle=\ttfamily\scriptsize}

\lstdefinestyle{groovy}{language=Groovy,basicstyle=\ttfamily\footnotesize}
\newcommand{\groovy}{\lstset{style=Groovy}}

\newcommand{\cpp}{\lstset{style=cpp}}
\newcommand{\cppp}{\lstset{style=cppp}}
\newcommand{\ansic}{\lstset{style=ansic}}
\newcommand{\ansicp}{\lstset{style=ansicp}}
\newcommand{\java}{\lstset{style=java}}
\newcommand{\javap}{\lstset{style=javap}}
\newcommand{\json}{\lstset{style=json}}
\newcommand{\jsonp}{\lstset{style=jsonp}}
\newcommand{\sql}{\lstset{style=sql}}
\newcommand{\sqlp}{\lstset{style=sqlp}}
\newcommand{\xml}{\lstset{style=xml}}
\newcommand{\xmlp}{\lstset{style=xmlp}}
\newcommand{\python}{\lstset{style=python}}
\newcommand{\pythonp}{\lstset{style=pythonp}}
\newcommand{\csh}{\lstset{style=shell}}
\newcommand{\cshp}{\lstset{style=shellp}}
\newcommand{\shell}{\lstset{style=shell}}
\newcommand{\shellp}{\lstset{style=shellp}}



\newcommand{\includecode}[2]{\lstinputlisting[caption=,escapechar={@*},style=#1]{#2}}

%-----------------------------------------------------------------------------------%

\mode<all>